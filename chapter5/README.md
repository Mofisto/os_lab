这一章的代码我修改了部分代码，剔除和修改了我认为无用的部分，包括：

* 使用终端探测内存容量部分，目前没有使用到该变量。
* 内核初始化的部分，这一部分都是对 elf 格式的解析，理解 elf 格式固然有帮助，但是这里太过于繁琐
* loader加载地址和内核加载地址，使得 loader 和 kernel 在内存中紧挨着





**内存的详细使用情况**

* 0x7e00 往后 0x200字节是 mbr
* 0x7e00+0x200 往后 0x600字节是 loader
* 0x7e00 +0x200+0x600 往后 512 字节是  kernel 



**关于页目录表和页表**

这里一共建立了两张表，一张页目录表和一张页表：

* 0x10 0000 往后 0x1000 字节是 页目录表
* 0x10 0000+0x1000 往后 0x1000 字节是 页表

```bash
b 0x8186   #开启分页后才能查看内存状态
xp /1024 0x100000  #查看 1024 个页目录表项
xp /256 0x100000+0x1000 #查看第一张页表的前 256 项

xp 0x100000+0x300*4  #查看页目录表中索引为 768 的项

xp 0x100000+0x301*4 #依次类推
xp /254  0x100000+0x300*4  #查看索引 768 往后 254 个页目录表项

```



由于这里的特殊构造，所以会出现把页目录表本身当作页表使用的情况，这是有意设计的。

![](C:\Users\Mofisto\OneDrive\文件\个人笔记\images\操作系统真相还原第五章的页表和GDT.jpg)



小结：

* 这一章主要理解分页机制
* 很多重点的内容还没有进行描述，作者的描述比较混乱，很容易让人迷失在大段文字中。

 